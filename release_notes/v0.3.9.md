# PiPinPP v0.3.9 Release Notes

**Release Date**: November 9, 2025  
**Type**: Patch Release (Critical Bug Fix)

## Overview

This is a critical bugfix release that resolves pkg-config linking errors discovered during hardware validation testing (Issue #11).

## üêõ Bug Fix

### pkg-config Linking Issue

**Issue**: The `pipinpp.pc` file had `-lgpiod` in `Libs.private` instead of `Libs`, causing link failures when users compiled programs using PiPinPP.

**Error encountered**:
```
/usr/bin/ld: undefined reference to `gpiod_line_request_release'
/usr/bin/ld: undefined reference to `gpiod_chip_close'
/usr/bin/ld: undefined reference to `gpiod_line_request_set_value'
... (many more undefined gpiod_* symbols)
```

**Impact**: Users had to manually add `-lgpiod` to their compile commands:
```bash
# v0.3.8 (broken) - required manual -lgpiod
g++ main.cpp $(pkg-config --cflags --libs pipinpp) -lgpiod -o main
```

**Resolution**: Updated `cmake/pipinpp.pc.in`:
1. Added `Requires: libgpiod >= 2.0` for proper dependency declaration
2. Moved `-lgpiod` from `Libs.private` to `Libs` for normal linking
3. Removed `Libs.private` line (no longer needed)

**Result**: pkg-config now correctly includes libgpiod:
```bash
# v0.3.9 (fixed) - just works!
g++ main.cpp $(pkg-config --cflags --libs pipinpp) -o main
```

## üì¶ Changes

- **Modified**: `cmake/pipinpp.pc.in` - Fixed library linking configuration
- **Modified**: `CMakeLists.txt` - Version bump to 0.3.9
- **Modified**: `install.sh` - Updated VERSION to v0.3.9
- **Modified**: `README.md` - Updated version badge and install URL
- **Modified**: `docs/API_REFERENCE.md` - Updated version and date
- **Modified**: `CHANGELOG.md` - Added v0.3.9 entry

## üîÑ Upgrade Instructions

### New Installations

Use the updated one-line installer:

```bash
curl -sSL https://raw.githubusercontent.com/Barbatos6669/PiPinPP/v0.3.9/install.sh | sudo bash
```

### Existing v0.3.8 Installations

**Option 1: Reinstall** (Recommended)
```bash
curl -sSL https://raw.githubusercontent.com/Barbatos6669/PiPinPP/v0.3.9/install.sh | sudo bash
```

**Option 2: Manual Update** (Advanced)

If you've already installed v0.3.8, you can manually update just the pkg-config file:

```bash
# Edit /usr/local/lib/pkgconfig/pipinpp.pc
sudo nano /usr/local/lib/pkgconfig/pipinpp.pc

# Change these lines:
# FROM:
# Libs: -L${libdir} -lpipinpp
# Libs.private: -lgpiod

# TO:
# Requires: libgpiod >= 2.0
# Libs: -L${libdir} -lpipinpp -lgpiod

# Save and test:
pkg-config --libs pipinpp
# Should now show: -L/usr/local/lib -lpipinpp -lgpiod
```

## ‚úÖ Verification

After upgrading, verify the fix:

```bash
# Check pkg-config output
pkg-config --libs pipinpp
# Should include: -lpipinpp -lgpiod

# Test compilation (should work without manual -lgpiod)
echo '#include <ArduinoCompat.hpp>
int main() { pinMode(17, OUTPUT); return 0; }' > test.cpp
g++ test.cpp $(pkg-config --cflags --libs pipinpp) -o test
./test
rm test test.cpp
```

## üôè Acknowledgments

Bug discovered during Issue #11 hardware validation testing. Thanks to the validation process for catching this real-world integration issue!

## üîó Links

- [Full Changelog](../CHANGELOG.md)
- [v0.3.8 Release Notes](v0.3.8.md)
- [GitHub Release](https://github.com/Barbatos6669/PiPinPP/releases/tag/v0.3.9)

---

**Previous Release**: [v0.3.8](v0.3.8.md) - Install Script Fixes  
**Next Release**: v0.4.0 - Hardware PWM & UART (Planned Q1 2026)
