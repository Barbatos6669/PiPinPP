# PiPinPP v0.3.3 - Trigonometry Constants & Angle Conversion

**Release Date:** November 5, 2025  
**Type:** Patch Release (Backward Compatible)

---

## üéØ Overview

This patch release adds **Arduino-compatible angle conversion constants** (`DEG_TO_RAD` and `RAD_TO_DEG`) for use with standard library trigonometric functions. Following our v0.3.2 design philosophy, we provide only Arduino-specific constants that don't conflict with the C++ standard library.

All changes are **100% backward compatible** with v0.3.2.

---

## ‚ú® New Features

### Trigonometry Constants

#### `DEG_TO_RAD`
Convert degrees to radians - the constant needed for trigonometric calculations.

**Value:** `0.017453292519943295769236907684886` (œÄ/180)

```cpp
#include <cmath>
#include <ArduinoCompat.hpp>

double angleDegrees = 45.0;
double angleRadians = angleDegrees * DEG_TO_RAD;
double sineValue = std::sin(angleRadians);  // sin(45¬∞) ‚âà 0.707
```

**Features:**
- Full precision double constant
- Arduino-compatible value
- Works with all standard library trig functions
- No naming conflicts

---

#### `RAD_TO_DEG`
Convert radians to degrees for human-readable output.

**Value:** `57.295779513082320876798154814105` (180/œÄ)

```cpp
#include <cmath>
#include <ArduinoCompat.hpp>

double angleRadians = M_PI / 2;  // 90 degrees in radians
double angleDegrees = angleRadians * RAD_TO_DEG;  // Returns 90.0
```

**Features:**
- Full precision double constant
- Arduino-compatible value
- Useful for displaying angles in degrees
- No naming conflicts

---

### Why Constants Only?

Like our v0.3.2 approach with `sqrt()`, `pow()`, `max()`, and `min()`, we **don't wrap** `sin()`, `cos()`, or `tan()` functions because:

1. **Naming conflicts** - Creating our own `sin()`, `cos()`, `tan()` causes ambiguity when users write `using namespace std;`
2. **Standard library** - These functions are already available in `<cmath>` and well-optimized
3. **Best practice** - Using `std::sin()`, `std::cos()`, `std::tan()` is the idiomatic C++ approach

**Arduino code:**
```cpp
float angle = 45.0;
float value = sin(angle * DEG_TO_RAD);  // Arduino
```

**PiPinPP code:**
```cpp
float angle = 45.0;
float value = std::sin(angle * DEG_TO_RAD);  // PiPinPP - just add std::
```

The conversion constants provide Arduino compatibility without conflicts!

---

## üìö Comprehensive Example: `trig_functions`

We've added a **390-line comprehensive example** demonstrating practical trigonometry applications:

### 1. **Angle Conversions**
Convert between degrees and radians with visual tables showing common angles (0¬∞, 30¬∞, 45¬∞, 60¬∞, 90¬∞, etc.)

### 2. **Trigonometric Functions**
Complete sine, cosine, tangent tables for common angles using `std::sin()`, `std::cos()`, `std::tan()`.

### 3. **Circular Motion**
Calculate X,Y positions on a circle given angle and radius - perfect for animations or robotic arm movements.

```cpp
struct Point2D {
    double x;
    double y;
};

Point2D calculateCircularPosition(double angleDegrees, double radius) {
    double angleRadians = angleDegrees * DEG_TO_RAD;
    return {
        radius * std::cos(angleRadians),
        radius * std::sin(angleRadians)
    };
}
```

### 4. **Right Triangle Calculations**
Calculate opposite and adjacent sides given angle and hypotenuse - useful for mechanical designs.

### 5. **Wave Generation (LED Breathing)**
Generate smooth sine wave patterns for LED breathing effects:

```cpp
// Generate smooth breathing pattern
for (int angle = 0; angle < 360; angle++) {
    double rad = angle * DEG_TO_RAD;
    int brightness = 127.5 + 127.5 * std::sin(rad);  // 0-255 range
    analogWrite(ledPin, brightness);
    delay(10);
}
```

**Visual output:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Degrees ‚îÇ  Value  ‚îÇ          Visual            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ    0¬∞   ‚îÇ   127   ‚îÇ ################           ‚îÇ
‚îÇ   30¬∞   ‚îÇ   191   ‚îÇ ##################‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚îÇ
‚îÇ   60¬∞   ‚îÇ   238   ‚îÇ ############################‚îÇ
‚îÇ   90¬∞   ‚îÇ   255   ‚îÇ ################################‚îÇ
‚îÇ  120¬∞   ‚îÇ   238   ‚îÇ ############################‚îÇ
‚îÇ  150¬∞   ‚îÇ   191   ‚îÇ ##################‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚îÇ
‚îÇ  180¬∞   ‚îÇ   127   ‚îÇ ################           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 6. **Servo Positioning**
Convert servo angles (0-180¬∞) to pulse widths (1000-2000¬µs):

```cpp
int angleToPulseWidth(double angleDegrees) {
    return static_cast<int>(1000 + (angleDegrees / 180.0) * 1000);
}
```

### 7. **Angle Calculations (atan2)**
Calculate angles from X,Y coordinates - useful for joystick input or target tracking:

```cpp
double calculateAngle(double x, double y) {
    double angleRadians = std::atan2(y, x);
    double angleDegrees = angleRadians * RAD_TO_DEG;
    
    // Normalize to 0-360¬∞ range
    if (angleDegrees < 0) {
        angleDegrees += 360;
    }
    
    return angleDegrees;
}
```

---

## üîÑ Migration Guide

**No migration needed!** This is a **100% backward compatible** patch release.

All existing code continues to work exactly as before. The new constants are purely additive.

### Optional: Add Trigonometry Support

**Before (Arduino):**
```cpp
float angle = 45.0;
float value = sin(angle * DEG_TO_RAD);
```

**After (PiPinPP):**
```cpp
#include <cmath>  // Add this for std::sin()

float angle = 45.0;
float value = std::sin(angle * DEG_TO_RAD);  // Just add std::
```

**For atan2 (angle from coordinates):**
```cpp
#include <cmath>

double x = 10.0, y = 10.0;
double angleRad = std::atan2(y, x);
double angleDeg = angleRad * RAD_TO_DEG;  // Returns 45.0¬∞
```

---

## üì¶ Installation

### Quick Install (Recommended)
```bash
curl -sSL https://raw.githubusercontent.com/Barbatos6669/PiPinPP/v0.3.3/install.sh | sudo bash
```

### Manual Installation
```bash
git clone https://github.com/Barbatos6669/PiPinPP.git
cd PiPinPP
git checkout v0.3.3
./build.sh
```

### Update from v0.3.2
```bash
cd PiPinPP
git pull origin main
git checkout v0.3.3
./build.sh
```

---

## üß™ Testing

All **40 unit tests pass** with 100% success rate:
- ‚úÖ 8 timing tests
- ‚úÖ 11 exception handling tests
- ‚úÖ 18 Pin operation tests
- ‚úÖ 3 legacy tests

Build tested on:
- ‚úÖ Raspberry Pi OS Trixie (Debian 13)
- ‚úÖ libgpiod 2.2.1
- ‚úÖ GCC 14.2.0 with `-Wall -Wextra -Wpedantic -Werror`
- ‚úÖ CMake 3.31.6

---

## üìö Documentation

Complete documentation available:
- **API Reference:** [docs/API_REFERENCE.md](docs/API_REFERENCE.md)
- **Build Guide:** [docs/BUILD.md](docs/BUILD.md)
- **Install Guide:** [docs/INSTALL.md](docs/INSTALL.md)
- **Changelog:** [CHANGELOG.md](CHANGELOG.md)
- **Roadmap:** [docs/planning/ROADMAP.md](docs/planning/ROADMAP.md)

---

## üìä Statistics

- **New Constants:** 2 (`DEG_TO_RAD`, `RAD_TO_DEG`)
- **Total Arduino Functions:** 19 (same as v0.3.2)
- **New Example:** trig_functions (390 lines, 7 demonstrations)
- **Lines of Code:** 2,699 (core library + example)
- **Documentation Files:** Updated with Trigonometry Constants section
- **Test Coverage:** 40/40 tests passing (100%)
- **Supported Platforms:** Raspberry Pi 4/5 with Raspberry Pi OS Trixie

---

## üôè Contributors

- **HobbyHacker / Barbatos6669** - Implementation, testing, and documentation

---

## üìã Full Changelog

See [CHANGELOG.md](../CHANGELOG.md) for complete details.

---

## üîÆ What's Next?

### v0.4.0 (Planned Q1 2026)
Major feature release with communication protocols:
- **Random number functions** - `random()`, `randomSeed()`
- **Bits and bytes functions** - Bit manipulation utilities
- **I2C/Wire API** - Complete Wire library compatibility
- **SPI API** - Complete SPI library compatibility
- **Serial/UART API** - Complete Serial library compatibility
- **Hardware PWM** - Native hardware PWM support

See [docs/planning/ROADMAP.md](../docs/planning/ROADMAP.md) for the full development plan.

---

## üí¨ Feedback & Support

- **Issues:** [GitHub Issues](https://github.com/Barbatos6669/PiPinPP/issues)
- **Discussions:** [GitHub Discussions](https://github.com/Barbatos6669/PiPinPP/discussions)
- **Documentation:** [GitHub Wiki](https://github.com/Barbatos6669/PiPinPP/wiki)
- **Discord:** [Join PiPin++ Discord](https://discord.gg/wXeZP8Ev)

---

## üìÑ License

MIT License - See [LICENSE](../LICENSE) file for details.

---

**Thank you for using PiPinPP!** üéâ

If you find this library useful, please ‚≠ê **star the repository** and share it with the Raspberry Pi and Arduino communities!

---

## üîó Quick Links

- **Repository:** https://github.com/Barbatos6669/PiPinPP
- **Latest Release:** https://github.com/Barbatos6669/PiPinPP/releases/tag/v0.3.3
- **Installation Script:** https://raw.githubusercontent.com/Barbatos6669/PiPinPP/v0.3.3/install.sh
- **Documentation:** https://github.com/Barbatos6669/PiPinPP/tree/main/docs
- **Examples:** https://github.com/Barbatos6669/PiPinPP/tree/main/examples
